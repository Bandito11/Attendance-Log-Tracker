{"version":3,"sources":["webpack:///./src/app/calendar/calendar.module.ts","webpack:///./src/app/calendar/calendar.page.html","webpack:///./src/app/calendar/calendar.page.scss","webpack:///./src/app/calendar/calendar.page.ts"],"names":[],"mappings":"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","file":"calendar-calendar-module.js","sourcesContent":["import { ComponentsModule } from './../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule, NavParams } from '@ionic/angular';\n\nimport { CalendarPage } from './calendar.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CalendarPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CalendarPage]\n})\nexport class CalendarPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title>{{htmlControls.toolbar.title}}</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button *ngIf=\\\"event\\\"></ion-back-button>\\n      <app-menu-button *ngIf=\\\"!event\\\"></app-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding class=\\\"calendar\\\">\\n  <calendar-component [language]=\\\"language\\\" (getDate)=\\\"getDate($event)\\\"></calendar-component>\\n  <h4>{{currentDate}}</h4>\\n  <ion-searchbar [(ngModel)]=\\\"search\\\" (ionInput)=\\\"searchStudent()\\\" animated=\\\"true\\\" type=\\\"search\\\">\\n  </ion-searchbar>\\n  <ion-list *ngIf=\\\"students\\\" lines=\\\"none\\\">\\n    <ion-virtual-scroll [items]=\\\"students\\\" approxHeaderWidth=\\\"380px\\\" approxHeaderHeight=\\\"44px\\\" approxItemWidth=\\\"380px\\\"\\n      approxItemHeight=\\\"240px\\\">\\n      <!-- <ion-item-sliding *ngFor=\\\"let student of students\\\" #slidingUser> -->\\n      <div *virtualItem=\\\"let student\\\" class=\\\"bottom\\\">\\n        <ion-item>\\n          <ion-avatar slot=\\\"start\\\">\\n            <ion-img src=\\\"{{student.picture}}\\\" alt=\\\"no image\\\"></ion-img>\\n          </ion-avatar>\\n          <ion-label>\\n            <p>\\n              <span class=\\\"label name\\\">{{htmlControls.name}}</span>\\n              <span class=\\\"name\\\">{{student.fullName}}</span>\\n            </p>\\n            <p>\\n              <span class=\\\"label\\\">ID: </span>{{student.id}}\\n            </p>\\n            <ion-buttons>\\n              <ion-button fill=\\\"solid\\\" color=\\\"primary\\\" (click)=\\\"addAttendance({id: student.id})\\\">\\n                {{htmlControls.attended}}\\n              </ion-button>\\n              <ion-button fill=\\\"solid\\\" color=\\\"secondary\\\" (click)=\\\"addAbsence({id: student.id})\\\">\\n                {{htmlControls.absence}}\\n              </ion-button>\\n              <ion-button fill=\\\"solid\\\" color=\\\"dark\\\" (click)=\\\"showNotes(student.id)\\\">\\n                <ion-icon name=\\\"paper\\\"></ion-icon>\\n              </ion-button>\\n            </ion-buttons>\\n            <ion-item *ngIf=\\\"toggle == student.id\\\" class=\\\"top\\\">\\n            <textarea #notes (keyup)=\\\"addNotes({id: student.id, notes:notes.value})\\\"\\n              padding>{{student.notes}}</textarea>\\n            </ion-item>\\n            <div class=\\\"pad\\\">\\n              <p class=\\\"left attended\\\" *ngIf=\\\"student.attendance\\\">\\n                {{student.firstName}}{{htmlControls.present}}\\n              </p>\\n              <p class=\\\"left attended\\\" *ngIf=\\\"student.absence\\\">\\n                {{student.firstName}}{{htmlControls.absent}}\\n              </p>\\n            </div>\\n          </ion-label>\\n        </ion-item>\\n      </div>\\n    </ion-virtual-scroll>\\n  </ion-list>\\n</ion-content>\"","module.exports = \".calendar h4 {\\n  text-align: center; }\\n\\n.calendar .label {\\n  font-weight: bolder; }\\n\\n.calendar .name {\\n  font-size: 130%; }\\n\\n.calendar .left {\\n  float: left; }\\n\\n.calendar .right {\\n  float: right;\\n  color: #8da2f7; }\\n\\n.calendar .attended {\\n  color: #e6a4a4; }\\n\\n.calendar textarea {\\n  width: 100%; }\\n\\n.calendar .top {\\n  padding-top: 5px; }\\n\\n.calendar .pad {\\n  padding-bottom: 1em; }\\n\\n.calendar .bottom {\\n  padding-bottom: 4.7em; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9lc3RlYmFubW9yYWxlcy9Qcm9qZWN0cy9hbWFyYW50aHVzMi9zcmMvYXBwL2NhbGVuZGFyL2NhbGVuZGFyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLGtCQUFrQixFQUFBOztBQUZ0QjtFQUtJLG1CQUFtQixFQUFBOztBQUx2QjtFQVFJLGVBQWUsRUFBQTs7QUFSbkI7RUFXSSxXQUFXLEVBQUE7O0FBWGY7RUFjSSxZQUFZO0VBQ1osY0FBeUIsRUFBQTs7QUFmN0I7RUFrQkksY0FBeUIsRUFBQTs7QUFsQjdCO0VBcUJJLFdBQVcsRUFBQTs7QUFyQmY7RUF3QkksZ0JBQWUsRUFBQTs7QUF4Qm5CO0VBMkJJLG1CQUFtQixFQUFBOztBQTNCdkI7RUE4QkkscUJBQXFCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9jYWxlbmRhci9jYWxlbmRhci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FsZW5kYXIge1xuICBoNCB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB9XG4gIC5sYWJlbCB7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbiAgfVxuICAubmFtZSB7XG4gICAgZm9udC1zaXplOiAxMzAlO1xuICB9XG4gIC5sZWZ0IHtcbiAgICBmbG9hdDogbGVmdDtcbiAgfVxuICAucmlnaHQge1xuICAgIGZsb2F0OiByaWdodDtcbiAgICBjb2xvcjogcmdiKDE0MSwgMTYyLCAyNDcpO1xuICB9XG4gIC5hdHRlbmRlZCB7XG4gICAgY29sb3I6IHJnYigyMzAsIDE2NCwgMTY0KTtcbiAgfVxuICB0ZXh0YXJlYSB7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbiAgLnRvcHtcbiAgICBwYWRkaW5nLXRvcDo1cHg7XG4gIH1cbiAgLnBhZHtcbiAgICBwYWRkaW5nLWJvdHRvbTogMWVtO1xuICB9XG4gIC5ib3R0b217XG4gICAgcGFkZGluZy1ib3R0b206IDQuN2VtO1xuICB9XG59XG5cbiJdfQ== */\"","import { MESESLABELS, DIASHEADER } from './../common/constants';\nimport { Component, ViewChild, ElementRef } from '@angular/core';\nimport { IRecord, ICalendar, ISimpleAlertOptions } from 'src/app/common/models';\nimport { handleError } from 'src/app/common/handleError';\nimport { MONTHSLABELS, WEEKDAYSHEADER } from 'src/app/common/constants';\nimport { filterStudentsList } from 'src/app/common/search';\nimport { AlertController } from '@ionic/angular';\nimport { AmaranthusDBProvider } from 'src/app/services/amaranthus-db/amaranthus-db';\nimport { ActivatedRoute } from '@angular/router';\nimport { Storage } from '@ionic/storage';\n\n@Component({\n  selector: 'app-calendar',\n  templateUrl: './calendar.page.html',\n  styleUrls: ['./calendar.page.scss'],\n})\nexport class CalendarPage {\n  currentDate: string;\n  students: IRecord[];\n  private unfilteredStudents: IRecord[];\n  private date: ICalendar;\n  timer;\n  @ViewChild('notes') notesElement: ElementRef;\n\n  toggle: string;\n  search: string;\n  event;\n  studentIds: string[];\n  language;\n  htmlControls = {\n    attended: '',\n    absence: '',\n    present: ``,\n    absent: '',\n    toolbar: {\n      title: ''\n    },\n    name: ''\n  };\n\n  LANGUAGE = {\n    spanish: {\n      attended: 'Asistió',\n      absence: 'Ausente',\n      present: ` está presente hoy.`,\n      absent: ' está ausente hoy.',\n      toolbar: {\n        title: 'Calendario'\n      },\n      name: 'Nombre: '\n    },\n    english: {\n      attended: 'Attended',\n      absence: 'Absent',\n      present: `'s is present today!`,\n      absent: `'s is absent today`,\n      toolbar: {\n        title: 'Calendar'\n      },\n      name: 'Name: '\n    }\n  };\n\n  constructor(\n    private route: ActivatedRoute,\n    private alertCtrl: AlertController,\n    private db: AmaranthusDBProvider,\n    private storage: Storage\n  ) { }\n\n  ionViewWillEnter() {\n    this.timer = 0;\n    this.storage.get('language').then(value => {\n      if (value) {\n        this.language = value;\n      } else {\n        this.language = 'english';\n      }\n      this.htmlControls = this.LANGUAGE[this.language];\n    });\n    this.event = this.route.snapshot.paramMap.get('event');\n    if (!this.event) {\n      this.event = '';\n    }\n    try {\n      this.studentIds = this.route.snapshot.paramMap.get('ids').split(',');\n    } catch (error) {\n      this.studentIds = [];\n    }\n    this.getStudentsRecords(this.date);\n  }\n\n  showNotes(id) {\n    if (this.toggle) {\n      this.toggle = '';\n    } else {\n      this.toggle = id;\n      setTimeout(() => {\n        this.notesElement.nativeElement.focus();\n      }, 0);\n    }\n  }\n\n  addNotes(opts: { id: string; notes: string }) {\n    clearTimeout(this.timer);\n    this.timer = setTimeout(() => {\n      const newNote = {\n        ...opts,\n        month: this.date.month,\n        day: this.date.day,\n        year: this.date.year,\n        event: this.event\n      };\n      this.db.insertNotes(newNote);\n      this.updateNotes(opts);\n    }, 1000);\n  }\n\n  updateNotes(opts: {\n    id: string;\n    notes: string\n  }) {\n    const index = this.students.findIndex(student => {\n      if (student.id === opts.id) {\n        return true;\n      }\n    });\n    this.students[index].notes = opts.notes;\n    this.unfilteredStudents[index].notes = opts.notes;\n  }\n\n  /**\n   *\n   * @param {ICalendar} opts\n   * Will get all Students queried by today's date.\n   */\n  getStudentsRecords(opts: ICalendar) {\n    const date = {\n      ...opts,\n      month: opts.month + 1\n    };\n    this.students = [];\n    this.unfilteredStudents = [];\n    try {\n      const response = this.db.getStudentsRecordsByDate({\n        date: date,\n        event: this.event\n      });\n      if (response.success === true) {\n        if (this.studentIds.length > 0) {\n          let list = [];\n          for (const id of this.studentIds) {\n            const found = response.data.find(student => id === student.id);\n            if (found) {\n              list = [...list, found];\n            }\n          }\n          this.students = list;\n          this.unfilteredStudents = list;\n        } else {\n          this.students = response.data;\n          this.unfilteredStudents = response.data;\n        }\n      } else {\n        handleError(response.error);\n      }\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  /**\n   *\n   * @param date\n   */\n  getDate(date: ICalendar) {\n    this.search = '';\n    this.date = date;\n    const currentDay = date.day;\n    const currentYear = date.year;\n    if (this.language === 'spanish') {\n      const currentMonth = MESESLABELS[date.month];\n      const currentWeekDay = DIASHEADER[date.weekDay];\n      this.currentDate = `${currentWeekDay} ${currentDay} de ${currentMonth} de ${currentYear}`;\n    } else {\n      const currentMonth = MONTHSLABELS[date.month];\n      const currentWeekDay = WEEKDAYSHEADER[date.weekDay];\n      this.currentDate = `${currentWeekDay}, ${currentDay} ${currentMonth}, ${currentYear}`;\n    }\n    this.getStudentsRecords(date);\n  }\n\n  addAttendance(opts: { id: string }) {\n    const response = this.db.addAttendance({\n      event: this.event,\n      date: this.date,\n      id: opts.id\n    });\n    if (response.success === true) {\n      this.updateStudentAttendance({\n        id: opts.id,\n        absence: false,\n        attendance: true\n      });\n      let options;\n      if (this.language === 'spanish') {\n        options = {\n          header: 'Éxito',\n          message: '¡El estudiante se marcó presente!',\n          buttons: ['Aprobar']\n        };\n      } else {\n        options = {\n          header: 'Success!',\n          message: 'Student was marked present!',\n          buttons: ['OK']\n        };\n      }\n      this.showSimpleAlert(options);\n    } else {\n      handleError(response.error);\n    }\n  }\n\n  addAbsence(opts: { id: string }) {\n    const response = this.db.addAbsence({\n      event: this.event,\n      date: this.date,\n      id: opts.id\n    });\n    if (response.success === true) {\n      this.updateStudentAttendance({\n        id: opts.id,\n        absence: true,\n        attendance: false\n      });\n      let options;\n      if (this.language === 'spanish') {\n        options = {\n          header: 'Éxito',\n          message: '¡El estudiante se marcó ausente!',\n          buttons: ['Aprobar']\n        };\n      } else {\n        options = {\n          header: 'Success!',\n          message: 'Student was marked absent!',\n          buttons: ['OK']\n        };\n      }\n      this.showSimpleAlert(options);\n    } else {\n      handleError(response.error);\n    }\n  }\n\n  private updateStudentAttendance(opts: { id: string; absence: boolean; attendance: boolean }) {\n    for (let i = 0; i < this.students.length; i++) {\n      if (this.students[i].id === opts.id) {\n        this.students[i].attendance = opts.attendance;\n        this.students[i].absence = opts.absence;\n        this.unfilteredStudents[i].attendance = opts.attendance;\n        this.unfilteredStudents[i].absence = opts.absence;\n\n      }\n    }\n  }\n\n  private async showSimpleAlert(options: ISimpleAlertOptions) {\n    const alert = await this.alertCtrl.create({\n      header: options.header,\n      message: options.message,\n      buttons: options.buttons\n    });\n    await alert.present();\n  }\n\n  searchStudent() {\n    const query = this.search;\n    query ? this.filterStudentsList(query) : this.initializeStudentsList();\n  }\n\n  private initializeStudentsList() {\n    this.students = [...this.unfilteredStudents];\n  }\n\n  private filterStudentsList(query: string) {\n    const students = <any>this.unfilteredStudents;\n    this.students = <any>filterStudentsList({ query: query, students: students });\n  }\n\n}\n"],"sourceRoot":""}