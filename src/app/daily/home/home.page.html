<ion-header>
  <ion-toolbar>
    <ion-title>Daily Attendance</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/events">Events</ion-button>
      <ion-button (click)="goToCreate()">Add</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content id="home">
  <ion-searchbar placeholder="Search by ID or Name" (ionInput)="searchStudent($event)" animated="true" type="search">
  </ion-searchbar>
  <ion-item>
    <ion-label>Sort by:</ion-label>
    <ion-select interface="popover" multiple="false" #sort (ionChange)="sortData(sort.value)">
      <ion-select-option *ngFor="let option of selectOptions" value="{{option}}">{{option}}</ion-select-option>
    </ion-select>
  </ion-item>
  <ion-item>
    <ion-label>Filter by class: </ion-label>
    <ion-select interface="popover" multiple="false" placeholder="None" #filter (ionChange)="filterByClass(filter.value)">
      <ion-select-option *ngFor="let class of filterOptions" value="{{class}}">{{class}}</ion-select-option>
    </ion-select>
  </ion-item>
  <ion-list lines="none">
    <ion-card *ngFor="let student of students">
      <ion-card-header>
        <ion-card-title>{{student.firstName}}
          <span *ngIf="student.initial">{{student.initial[0]}}.</span> {{student.lastName}}
        </ion-card-title>
        <ion-card-subtitle><span class="label">ID: </span>{{student.id}}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col size="2">
          <ion-thumbnail>
            <img src="{{student.picture}}" alt="An image of user">
          </ion-thumbnail>
        </ion-col>
      <ion-col size="10">
          <ion-item>
            <ion-label *ngIf="student.class">
              <span class="label">Class: </span>{{student.class}}
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-label *ngIf="student.phoneNumber">
              <span class="label">Phone: </span>{{student.phoneNumber}}
            </ion-label>
          </ion-item>
        </ion-col>
        </ion-row>
        </ion-grid>
        <ion-buttons>
          <ion-button fill="solid" color="primary" (click)="addAttendance({id: student.id})">
            Attended
          </ion-button>
          <ion-button fill="solid" color="secondary" (click)="addAbsence({id: student.id})">
            Absent
          </ion-button>
          <ion-button fill="solid" color="tertiary" (click)="goToProfile(student.id)" >
            Profile
          </ion-button>
          <ion-button fill="solid" color="dark" (click)="showNotes(student.id)">
            <ion-icon name="paper"></ion-icon>
          </ion-button>
        </ion-buttons>
        <div *ngIf="toggle == student.id" padding>
          <textarea #notes (keyup)="addNotes({id: student.id, notes:notes.value})">{{student.notes}}</textarea>
        </div>
        <ion-item>
          <ion-label class="attended" *ngIf="student.attendance" text-wrap>
            {{student.firstName}}'s present today!
          </ion-label>
          <ion-label class="attended" *ngIf="student.absence" text-wrap>
            {{student.firstName}}'s absent today!
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>
  </ion-list>

</ion-content>